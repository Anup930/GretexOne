<!-- V 1.0 -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <base target="_top">
  <title>Gretex One - Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --purple-1: #3a3f9d;
      --purple-2: #5b6fe0;
      --accent: linear-gradient(90deg,#2f66ff,#7c4dff);
      --card-bg: linear-gradient(180deg, rgba(255,255,255,0.88), rgba(245,249,255,0.88));
      --soft-shadow: 0 18px 40px rgba(19,35,85,0.16);
      --inner-shadow: 0 8px 30px rgba(55,65,120,0.12);
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:"Poppins",system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background: linear-gradient(135deg,#6673ff22,#3f7bff22);
      min-height:100vh;
      color:#1c2533;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
    }

    /* ðŸ”´ MOVING RED NOTICE BAR */
    .notice {
      position:fixed;
      left:0; right:0;
      top:0;
      height:42px;
      background:#d32f2f;
      color:#fff;
      z-index:9999;
      display:flex;
      align-items:center;
      overflow:hidden;
      box-shadow:0 2px 6px rgba(0,0,0,0.08);
      padding:0 8px;
      font-weight:600;
      font-size:14px;
    }

    .notice-track {
      display:flex;
      gap:48px;
      white-space:nowrap;
      will-change:transform;
      animation: scroll-notice 16s linear infinite;
    }

    .notice-item{
      display:inline-block;
    }

    @keyframes scroll-notice {
      0%   { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    .notice:hover .notice-track{
      animation-play-state: paused;
    }


    /* ðŸ“Œ MAIN LAYOUT */
    .wrap {
      width: min(1200px, 96%);
      background: linear-gradient(90deg,#5b6fe0,#3a3f9d);
      border-radius:28px;
      padding:28px;
      margin-top:60px;
      box-shadow: var(--soft-shadow);
    }

    .panel {
      display:flex;
      align-items:stretch;
      border-radius:18px;
    }

    /* LEFT PANEL */
    .left {
      width:48%;
      background: linear-gradient(135deg,#384090,#4c5bd6);
      color:white;
      padding:56px 48px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      border-radius:18px 0 0 18px;
      box-shadow: inset 0 -40px 80px rgba(0,0,0,0.06);
      position:relative;
    }

    .logo{
      width:120px;
      height:120px;
      margin-bottom:18px;
    }

    .brand-title{
      font-size:48px;
      font-weight:700;
      margin-bottom:12px;
    }

    .left p{
      max-width:380px;
      text-align:center;
      color: rgba(255,255,255,0.88);
      line-height:1.6;
      font-size:15px;
    }

    /* RIGHT PANEL */
    .right {
      flex:1;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:44px;
    }

    .card {
      width:100%;
      max-width:420px;
      background: var(--card-bg);
      border-radius:18px;
      padding:36px 34px;
      box-shadow: var(--inner-shadow), 0 22px 46px rgba(32,44,80,0.08);
      backdrop-filter: blur(6px);
    }

    .card h1{
      font-size:28px;
      margin-bottom:6px;
      font-weight:700;
      color:#22293a;
    }

    .card .sub { color:#6b758d; margin-bottom:18px; font-weight:500; font-size:14px }

    label{
      display:block;
      font-size:13px;
      color:#5c6678;
      margin:12px 0 8px;
      font-weight:600;
    }

    input[type="text"], input[type="password"]{
      width:100%;
      padding:12px 14px;
      border-radius:10px;
      border:1px solid #e3e7ef;
      font-size:15px;
      background:linear-gradient(180deg,#fff,#fbfdff);
    }

    input:focus{
      outline:none;
      box-shadow:0 6px 20px rgba(74,90,155,0.12);
      border-color:#6570d8;
    }

    .btn{
      margin-top:18px;
      width:100%;
      padding:14px 18px;
      border-radius:10px;
      border:none;
      cursor:pointer;
      font-weight:700;
      font-size:15px;
      color:#fff;
      background: linear-gradient(90deg,#2f66ff,#7c4dff);
      box-shadow: 0 10px 30px rgba(60,70,150,0.18);
    }

    .forgot {
      display:block;
      text-align:center;
      margin-top:14px;
      color:#5b6f9a;
      font-size:13px;
      text-decoration:none
    }

    @media (max-width:920px){
      .panel{flex-direction:column}
      .left{width:100%; border-radius:12px 12px 0 0; padding:34px}
      .right{padding:26px}
    }
  </style>

</head>

<body>

  <!-- ðŸ”´ MOVING NOTICE BAR -->
  <div class="notice">
    <div class="notice-track">
      <!-- <div class="notice-item">Important Notice: Provisional payslip has been generated</div>
      <div class="notice-item">Important Notice: Provisional payslip has been generated</div> -->
    </div>
  </div>

  <div class="wrap">
    <div class="panel">

      <!-- LEFT PANEL -->
      <div class="left">
        <img class="logo" src="https://gretexapp.github.io/HR-Ticket-Hub/logo-1.gif">

        <div class="brand-title">Gretex One</div>
        <p>A secure space to manage HR requests, tickets and approvals effortlessly. Sign in to access your personalized dashboard.</p>
      </div>

      <!-- RIGHT PANEL -->
      <div class="right">
        <div class="card">
          <h1>Welcome Back ðŸ‘‹</h1>
          <div class="sub">Help / Notes</div>

          <form id="login-form">
            <label for="userid">User ID</label>
            <input id="userid" type="text" name="userid" required>

            <label for="password">Password</label>
            <input id="password" type="password" name="password" required>

            <div id="message" style="margin-top:10px;font-size:13px;color:#8a93a8;"></div>

            <button type="submit" class="btn">Sign In</button>

            <a href="#" class="forgot">Forgot Password?</a>
          </form>
        </div>
      </div>

    </div>
  </div>


<script>
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyH5kOEdJGlPgx4sMH3vEqkixalf3X6PACttZHMLWh8M-TtLT2OUN5U_XRMGP-VWAfW/exec";

  document.getElementById('login-form').addEventListener('submit', async function(e){
    e.preventDefault();

    const u = document.getElementById('userid').value.trim();
    const p = document.getElementById('password').value;

    const btn = document.querySelector('.btn');
    const msg = document.getElementById('message');

    msg.textContent = "Signing in...";
    btn.disabled = true;

    const payload = { action: "userLogin", params: { userId: u, password: p } };

    try{
      const res = await fetch(SCRIPT_URL, {
        method:'POST',
        headers:{ 'Content-Type': 'text/plain;charset=utf-8' },
        body: JSON.stringify(payload)
      });

      const json = await res.json();

      if(json.status === "success"){
        sessionStorage.setItem('gretexUser', JSON.stringify(json.data));
        window.location.href = "App_access.html";
      } else {
        msg.textContent = json.data?.message || "Invalid credentials";
        msg.style.color = "#d32f2f";
        btn.disabled = false;
      }
    }
    catch(err){
      msg.textContent = "Network error: " + err.message;
      msg.style.color = "#d32f2f";
      btn.disabled = false;
    }
  });

  if(sessionStorage.getItem("gretexUser")){
    window.location.href = "App_access.html";
  }
</script>

</body>
</html>
